<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Lưu trú Hà Nội | HÀ NỘI</title>
        <meta name="description" content="Tìm khách sạn, homestay, nhà nghỉ, căn hộ dịch vụ tại Hà Nội. Lọc nhanh theo loại hình, mức giá, khu vực, tiện ích." />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/client/css/style.css" />
        <link rel="stylesheet" href="/client/css/responsive.css" />
        <link rel="stylesheet" href="/client/css/harmony.css" />
        <link rel="stylesheet" href="/client/css/accommodation.css" />
        <link rel="apple-touch-icon" sizes="180x180" href="/client/img/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/client/img/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/client/img/favicon-16x16.png" />
        <link rel="manifest" href="/site.webmanifest" />
    </head>
    <body class="accommodation">
        <%- include('../../partials/header') %>

        <!-- Banner -->
        <header class="page-header accommodation-banner" style="background-image: url('/client/img/carousel-img2.jpg');">
            <div class="header-content">
                <h2 id="quote">Nghỉ ngơi thoải mái – tận hưởng Hà Nội</h2>
                <div class="line"></div>
                <h1>Lưu trú Hà Nội</h1>
                <p class="font-color">Chọn chỗ ở phù hợp về vị trí, tiện nghi và ngân sách</p>
            </div>
        </header>

        <!-- Filters -->
        <section>
            <div class="accommodation-filters" aria-label="Bộ lọc lưu trú">
                <div class="filter-row">
                    <div class="box" role="search">
                        <i class="fa fa-search" aria-hidden="true" style="margin-right:8px"></i>
                        <input id="acc-search" type="text" placeholder="Tìm theo tên cơ sở lưu trú..." aria-label="Tìm theo tên" />
                    </div>
                    <div class="box">
                        <select id="acc-type" aria-label="Chọn loại hình">
                            <option value="all">Tất cả loại hình</option>
                            <option value="hotel">Khách sạn</option>
                            <option value="homestay">Homestay</option>
                            <option value="guesthouse">Nhà nghỉ</option>
                            <option value="apartment">Căn hộ dịch vụ</option>
                        </select>
                    </div>
                    <div class="box">
                        <select id="acc-price" aria-label="Chọn mức giá">
                            <option value="all">Tất cả mức giá</option>
                            <option value="lt1m">Dưới 1.000.000đ</option>
                            <option value="1to2m">1.000.000đ - 2.000.000đ</option>
                            <option value="2to3m">2.000.000đ - 3.000.000đ</option>
                            <option value="gt3m">Trên 3.000.000đ</option>
                        </select>
                    </div>
                    <div class="box">
                        <select id="acc-area" aria-label="Chọn khu vực">
                            <option value="all">Tất cả khu vực</option>
                            <option value="center">Quận Hoàn Kiếm</option>
                            <option value="tayho">Quận Tây Hồ</option>
                            <option value="caugiay">Quận Cầu Giấy</option>
                            <option value="haibatrung">Quận Hai Bà Trưng</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="accommodation-pills" aria-label="Chọn nhanh theo loại hình">
                <div class="pill active" data-type="all">Tất cả</div>
                <div class="pill" data-type="hotel">Khách sạn</div>
                <div class="pill" data-type="homestay">Homestay</div>
                <div class="pill" data-type="guesthouse">Nhà nghỉ</div>
                <div class="pill" data-type="apartment">Căn hộ</div>
            </div>

            <!-- Grid -->
            <section class="accommodation-grid" aria-label="Danh sách cơ sở lưu trú">
                <% 
                    var list = (typeof accommodations !== 'undefined' && accommodations && accommodations.length) ? accommodations : null;
                    function slugify(str){
                        if (!str) return '';
                        return String(str).toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu,'').replace(/[^a-z0-9\s-]/g,'').trim().replace(/\s+/g,'-').replace(/-+/g,'-');
                    }
                %>
                <% if (list) { list.forEach(function(item){
                    var title = item.title || 'Cơ sở lưu trú';
                    var img = item.image || item.heroImage || (item.images && item.images[0]) || '/client/img/carousel-img2.jpg';
                    var type = item.type || 'hotel';
                    var area = item.area || 'center';
                    var price = (item.price && Number(item.price)) || (item.priceFrom && Number(item.priceFrom)) || '';
                    var amenities = (item.amenities && item.amenities.join(',')) || '';
                    var desc = item.shortDescription || item.description || '';
                    var slug = item.slug || slugify(title);
                %>
                <article class="accommodation-card" data-title="<%= title %>" data-type="<%= type %>" data-area="<%= area %>" data-price="<%= price %>" data-amenities="<%= amenities %>">
                    <div class="thumb">
                        <img src="<%= img %>" alt="<%= title %>" loading="lazy" />
                    </div>
                    <div class="content">
                        <h3 class="title dark"><%= title %></h3>
                        <% if (desc) { %><p class="desc font-color"><%= desc %></p><% } %>
                        <div class="meta">
                            <% if (price) { %>
                            <span class="price">~ <%= Number(price).toLocaleString('vi-VN') %>đ/đêm</span>
                            <% } %>
                            <div class="amenities">
                                <% if (item.amenities && item.amenities.length) { item.amenities.slice(0,3).forEach(function(a){ %>
                                <span class="tag"><%= a %></span>
                                <% }) } %>
                            </div>
                        </div>
                        <div class="actions">
                            <a class="ctn" href="/accommodation/<%= slug %>">Xem chi tiết</a>
                        </div>
                    </div>
                </article>
                <% }) } %>
            </section>
        </section>

        <!-- up scroll -->
        <i class="arrow" onclick="topFunction()" id="upbtn"></i>

        <!--footer-->
        <%- include('../../partials/footer') %>

        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="/client/js/includes.js"></script>
        <script src="/client/js/script.js"></script>
        <script src="/client/js/accommodation.js"></script>
        <!--footer-->
    </body>
</html>
